<!DOCTYPE html>
<html>
<head>
    <title>Results - HireMind</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<div class="container">
    <div class="header">
        <div class="logo">
            <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
                <circle cx="20" cy="20" r="18" fill="#2C7BE5" opacity="0.1"/>
                <path d="M20 8L28 14V26L20 32L12 26V14L20 8Z" fill="#2C7BE5"/>
                <circle cx="20" cy="20" r="4" fill="white"/>
            </svg>
            <h1>HireMind</h1>
        </div>
        <div class="step-indicator">
            <div class="step completed">âœ“</div>
            <div class="step-line completed"></div>
            <div class="step completed">âœ“</div>
            <div class="step-line completed"></div>
            <div class="step active">3</div>
        </div>
    </div>

    <div class="content-header">
        <h2>Your Skill Gap Analysis</h2>
        <p class="subtitle">Here's your personalized assessment based on your target role</p>
    </div>

    <!-- Celebration Animation Container -->
    <div id="celebration-container"></div>

    <!-- Results Summary Cards -->
    <div class="results-summary">
        <div class="summary-card">
            <div class="card-icon">ðŸŽ¯</div>
            <div class="card-content">
                <div class="card-label">Target Role</div>
                <div class="card-value">{{ job_role }}</div>
            </div>
        </div>

        <div class="summary-card">
            <div class="card-icon">ðŸ“Š</div>
            <div class="card-content">
                <div class="card-label">Skill Gap Score</div>
                <div class="card-value">{{ total_gap }}</div>
            </div>
        </div>

        <div class="summary-card readiness-card">
            <div class="card-icon">
                {% if "Job Ready" in readiness %}ðŸŽ‰
                {% elif "Almost Ready" in readiness %}âš¡
                {% else %}ðŸ“š
                {% endif %}
            </div>
            <div class="card-content">
                <div class="card-label">Readiness Status</div>
                <div class="card-value readiness-{{ readiness.replace(' ', '-') }}">{{ readiness }}</div>
            </div>
        </div>
    </div>

    <!-- Skill Gap Details -->
    <div class="section">
        <h3 class="section-title">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"/>
            </svg>
            Detailed Skill Analysis
        </h3>
        
        <div class="table-container">
            <table class="modern-table">
                <thead>
                    <tr>
                        <th>Skill</th>
                        <th>Your Level</th>
                        <th>Required</th>
                        <th>Importance</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    {% for row in gap_details %}
                    <tr>
                        <td class="skill-name">
                            <span class="skill-dot"></span>
                            {{ row.skill }}
                        </td>
                        <td>
                            <div class="level-badge level-{{ row.user_level }}">
                                Level {{ row.user_level }}
                            </div>
                        </td>
                        <td>
                            <div class="level-badge required">
                                Level {{ row.required_level }}
                            </div>
                        </td>
                        <td>
                            <div class="importance-indicator">
                                {% for i in range(row.weight|int) %}
                                <span class="importance-dot filled"></span>
                                {% endfor %}
                                {% for i in range(5 - row.weight|int) %}
                                <span class="importance-dot"></span>
                                {% endfor %}
                            </div>
                        </td>
                        <td>
                            <span class="status-badge status-{{ row.status }}">
                                {% if row.status == "Strong" %}âœ“
                                {% elif row.status == "Weak" %}!
                                {% else %}âœ—
                                {% endif %}
                                {{ row.status }}
                            </span>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- Recommendations -->
    <div class="section">
        <h3 class="section-title">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
            </svg>
            Priority Skills to Focus On
        </h3>
        
        {% if recommendations %}
        <div class="recommendations-grid">
            {% for rec in recommendations %}
            <div class="recommendation-card">
                <div class="rec-priority">
                    <div class="priority-badge priority-{{ loop.index }}">
                        #{{ loop.index }}
                    </div>
                </div>
                <div class="rec-content">
                    <h4>{{ rec.skill }}</h4>
                    <div class="rec-score">
                        <span class="score-label">Priority Score:</span>
                        <span class="score-value">{{ "%.1f"|format(rec.priority) }}</span>
                    </div>
                    <div class="rec-progress">
                        <div class="progress-bar" style="width: {{ (rec.priority / recommendations[0].priority * 100) | int }}%"></div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="success-message">
            <div class="success-icon">ðŸŽ‰</div>
            <h4>Congratulations!</h4>
            <p>You already meet all required skill levels for this role. You're job ready!</p>
        </div>
        {% endif %}
    </div>

    <div class="button-container">
        <button onclick="window.location.href='/'" class="btn-secondary">
            Start New Assessment
        </button>
    </div>
</div>

<script>
// Celebration animation trigger
window.addEventListener('load', function() {
    createCelebration();
});

function createCelebration() {
    const container = document.getElementById('celebration-container');
    const colors = ['#2C7BE5', '#60A5FA', '#93C5FD', '#DBEAFE', '#FFFFFF'];
    
    for (let i = 0; i < 50; i++) {
        setTimeout(() => {
            const star = document.createElement('div');
            star.className = 'celebration-star';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            star.style.animationDelay = Math.random() * 0.5 + 's';
            star.style.animationDuration = (Math.random() * 1 + 1) + 's';
            
            container.appendChild(star);
            
            setTimeout(() => star.remove(), 2000);
        }, i * 20);
    }
}
</script>

</body>
</html>